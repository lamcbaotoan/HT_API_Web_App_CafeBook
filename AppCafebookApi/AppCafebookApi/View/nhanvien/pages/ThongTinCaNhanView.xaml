<Page x:Class="AppCafebookApi.View.nhanvien.pages.ThongTinCaNhanView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="720" d:DesignWidth="1150"
      Title="ThongTinCaNhanView"
      FontFamily="Segoe UI" Background="#FFF8E1" Loaded="Page_Loaded">

    <Page.Resources>
        <SolidColorBrush x:Key="PrimaryBrownBrush" Color="#6F4E37"/>
        <SolidColorBrush x:Key="SecondaryBrownBrush" Color="#A1887F"/>
        <SolidColorBrush x:Key="ActionBlueBrush" Color="#42A5F5"/>
        <SolidColorBrush x:Key="ActionGreenBrush" Color="#66BB6A"/>
        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#4E342E"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#BDBDBD"/>
        </Style>
        <Style TargetType="PasswordBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#BDBDBD"/>
        </Style>
        <Style TargetType="Button" x:Key="ActionButton">
            <Setter Property="Background" Value="{StaticResource PrimaryBrownBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style TargetType="Button" x:Key="SecondaryButton" BasedOn="{StaticResource ActionButton}">
            <Setter Property="Background" Value="{StaticResource SecondaryBrownBrush}"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="InfoDisplayLabel">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#4E342E"/>
            <Setter Property="Margin" Value="0,15,0,2"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="InfoDisplayText">
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="Foreground" Value="#333"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </Page.Resources>

    <Grid Margin="25">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Margin="0,0,20,0">
            <TextBlock Text="Thông tin cá nhân" FontSize="22" FontWeight="Bold" Foreground="{StaticResource PrimaryBrownBrush}" Margin="0,0,0,20"/>

            <Border CornerRadius="150" Width="300" Height="300" BorderBrush="{StaticResource PrimaryBrownBrush}" BorderThickness="2" Background="#EFEBE9">
                <Ellipse x:Name="imgAvatar" Width="300" Height="300">
                    <Ellipse.Fill>
                        <ImageBrush Stretch="UniformToFill"/>
                    </Ellipse.Fill>
                </Ellipse>
            </Border>

            <TextBlock Text="Họ tên:" Style="{StaticResource InfoDisplayLabel}" Margin="0,20,0,2"/>
            <TextBlock x:Name="lblHoTen" Text="Đang tải..." Style="{StaticResource InfoDisplayText}"/>
            <TextBlock Text="Số điện thoại:" Style="{StaticResource InfoDisplayLabel}"/>
            <TextBlock x:Name="lblSoDienThoai" Text="Đang tải..." Style="{StaticResource InfoDisplayText}"/>
            <TextBlock Text="Email:" Style="{StaticResource InfoDisplayLabel}"/>
            <TextBlock x:Name="lblEmail" Text="Đang tải..." Style="{StaticResource InfoDisplayText}"/>
            <TextBlock Text="Địa chỉ:" Style="{StaticResource InfoDisplayLabel}"/>
            <TextBlock x:Name="lblDiaChi" Text="Đang tải..." Style="{StaticResource InfoDisplayText}"/>

            <Separator Margin="0,20,0,10"/>

            <Button x:Name="btnChinhSua" Content="Chỉnh sửa thông tin" Style="{StaticResource ActionButton}" Background="{StaticResource ActionBlueBrush}" Click="BtnChinhSua_Click" Margin="0,10,0,0"/>
            <Button x:Name="btnVietDon" Content="Viết đơn xin nghỉ" Style="{StaticResource ActionButton}" Margin="0,10,0,0" Click="BtnVietDon_Click"/>
            <Button x:Name="btnDoiMatKhau" Content="Đổi mật khẩu" Style="{StaticResource SecondaryButton}" Margin="0,10,0,0" Click="BtnDoiMatKhau_Click"/>
        </StackPanel>

        <Grid Grid.Column="1" Margin="20,0,0,0">

            <StackPanel x:Name="panelLichSu" Visibility="Visible">

                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Thông báo lịch làm việc" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>
                        <TextBlock x:Name="lblThongBaoLich" Text="Đang tải lịch..." FontSize="14" TextWrapping="Wrap"/>
                        <TextBlock x:Name="lblThoiGianCa" Text="" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource PrimaryBrownBrush}"/>
                    </StackPanel>
                </Border>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                    <TextBlock Text="Tổng số đơn xin nghỉ tháng này:" FontSize="16" FontWeight="Bold" Foreground="{StaticResource PrimaryBrownBrush}"/>
                    <TextBlock x:Name="lblSoLanNghi" Text="0" FontSize="16" FontWeight="Bold" Foreground="#D32F2F" Margin="10,0,0,0"/>
                </StackPanel>

                <TextBlock Text="Lịch làm việc tháng này" FontSize="18" FontWeight="Bold" Foreground="{StaticResource PrimaryBrownBrush}" Margin="0,0,0,10"/>
                <DataGrid x:Name="dgLichLamViec" AutoGenerateColumns="False" IsReadOnly="True"
                          CanUserAddRows="False" Background="White" BorderBrush="#DDD" BorderThickness="1">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Ngày làm" Binding="{Binding NgayLam, StringFormat=dd/MM/yyyy}" Width="120" FontWeight="SemiBold"/>
                        <DataGridTextColumn Header="Tên Ca" Binding="{Binding TenCa}" Width="*"/>
                        <DataGridTextColumn Header="Giờ vào" Binding="{Binding GioBatDau, StringFormat=hh\\:mm}" Width="100"/>
                        <DataGridTextColumn Header="Giờ ra" Binding="{Binding GioKetThuc, StringFormat=hh\\:mm}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>

            <Border x:Name="panelChinhSua" Background="White" CornerRadius="8" Padding="20" Visibility="Collapsed">
                <StackPanel>
                    <TextBlock Text="Chỉnh sửa thông tin chi tiết" FontWeight="Bold" FontSize="16" Margin="0,0,0,15"/>
                    <TextBlock Text="Họ tên:" Style="{StaticResource LabelStyle}"/>
                    <TextBox x:Name="txtEditHoTen"/>
                    <TextBlock Text="Số điện thoại:" Style="{StaticResource LabelStyle}"/>
                    <TextBox x:Name="txtEditSoDienThoai"/>
                    <TextBlock Text="Email:" Style="{StaticResource LabelStyle}"/>
                    <TextBox x:Name="txtEditEmail"/>
                    <TextBlock Text="Địa chỉ:" Style="{StaticResource LabelStyle}"/>
                    <TextBox x:Name="txtEditDiaChi" Height="80" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                    <Button x:Name="btnChonAnh" Content="Thay đổi ảnh đại diện..." Style="{StaticResource SecondaryButton}" Margin="0,15,0,0" Click="BtnChonAnh_Click"/>
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <Button x:Name="btnLuu" Content="Lưu thay đổi" Style="{StaticResource ActionButton}" Background="{StaticResource ActionGreenBrush}" Click="BtnLuu_Click"/>
                        <Button x:Name="btnHuyChinhSua" Content="Hủy" Style="{StaticResource SecondaryButton}" Margin="10,0,0,0" Click="BtnHuyChinhSua_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border x:Name="panelDoiMatKhau" Background="White" CornerRadius="8" Padding="20" Visibility="Collapsed">
                <StackPanel>
                    <TextBlock Text="Đổi mật khẩu" FontWeight="Bold" FontSize="16" Margin="0,0,0,15"/>
                    <TextBlock Text="Mật khẩu cũ:" Style="{StaticResource LabelStyle}"/>
                    <PasswordBox x:Name="txtMatKhauCu" Margin="0,5,0,15"/>
                    <TextBlock Text="Mật khẩu mới:" Style="{StaticResource LabelStyle}"/>
                    <PasswordBox x:Name="txtMatKhauMoi" Margin="0,5,0,15"/>
                    <TextBlock Text="Xác nhận mật khẩu mới:" Style="{StaticResource LabelStyle}"/>
                    <PasswordBox x:Name="txtXacNhanMatKhau" Margin="0,5,0,20"/>
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnXacNhanDoiMatKhau" Content="Xác nhận" Style="{StaticResource ActionButton}" Background="{StaticResource ActionGreenBrush}" Click="BtnXacNhanDoiMatKhau_Click"/>
                        <Button x:Name="btnHuyDoiMatKhau" Content="Hủy" Style="{StaticResource SecondaryButton}" Margin="10,0,0,0" Click="BtnHuyDoiMatKhau_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border x:Name="panelVietDon" Background="White" CornerRadius="8" Padding="20" Visibility="Collapsed">
                <StackPanel>
                    <TextBlock Text="Viết đơn xin nghỉ" FontWeight="Bold" FontSize="16" Margin="0,0,0,15"/>
                    <TextBlock Text="Loại đơn:" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="cmbLoaiDon" Margin="0,5,0,15" Padding="8">
                        <ComboBoxItem Content="Nghỉ phép (Có lương)"/>
                        <ComboBoxItem Content="Nghỉ ốm"/>
                        <ComboBoxItem Content="Nghỉ việc riêng (Không lương)"/>
                        <ComboBoxItem Content="Khác"/>
                    </ComboBox>
                    <Grid Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Margin="0,0,5,0">
                            <TextBlock Text="Từ ngày:" Style="{StaticResource LabelStyle}"/>
                            <DatePicker x:Name="dpNgayBatDau" Margin="0,5,0,0"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="5,0,0,0">
                            <TextBlock Text="Đến ngày:" Style="{StaticResource LabelStyle}"/>
                            <DatePicker x:Name="dpNgayKetThuc" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Grid>
                    <TextBlock Text="Lý do:" Style="{StaticResource LabelStyle}"/>
                    <TextBox x:Name="txtLyDo" Margin="0,5,0,20" Padding="8" Height="100" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="btnGuiDon" Content="Gửi đơn" Style="{StaticResource ActionButton}" Background="{StaticResource ActionGreenBrush}" Click="BtnGuiDon_Click"/>
                        <Button x:Name="btnHuyGuiDon" Content="Hủy" Style="{StaticResource SecondaryButton}" Margin="10,0,0,0" Click="BtnHuyGuiDon_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>

        </Grid>
    </Grid>
</Page>