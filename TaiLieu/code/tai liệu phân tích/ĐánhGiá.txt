Tuyá»‡t vá»i ğŸ¯ â€” Ä‘Ã¢y lÃ  bÆ°á»›c **nÃ¢ng cáº¥p cá»±c ká»³ quan trá»ng** giÃºp há»‡ thá»‘ng **CafÃ©book** cá»§a báº¡n trá»Ÿ nÃªn *chuyÃªn nghiá»‡p vÃ  tÆ°Æ¡ng tÃ¡c tá»‘t vá»›i khÃ¡ch hÃ ng*:

> ğŸ‘‰ ThÃªm **chá»©c nÄƒng â€œÄÃ¡nh giÃ¡ sau khi Ä‘áº·t hÃ ng / sá»­ dá»¥ng dá»‹ch vá»¥â€**,
> Ã¡p dá»¥ng cho **cáº£ sÃ¡ch thuÃª vÃ  mÃ³n gá»i**,
> vÃ  **táº¡o bÃ¡o cÃ¡o tá»•ng há»£p pháº£n há»“i khÃ¡ch hÃ ng**.

DÆ°á»›i Ä‘Ã¢y lÃ  **báº£n Ä‘áº·c táº£ chi tiáº¿t chá»©c nÄƒng Ä‘Ã¡nh giÃ¡**, theo chuáº©n bÃ¡o cÃ¡o nghiá»‡p vá»¥, cÃ³ thá»ƒ chÃ©p trá»±c tiáº¿p vÃ o Ä‘á»“ Ã¡n hoáº·c tÃ i liá»‡u ká»¹ thuáº­t ğŸ‘‡

---

# ğŸ§¾ Äáº¶C Táº¢ CHá»¨C NÄ‚NG: ÄÃNH GIÃ Dá»ŠCH Vá»¤ SAU KHI Äáº¶T HÃ€NG

---

## ğŸ”· 1. Má»¥c tiÃªu

Cung cáº¥p tÃ­nh nÄƒng cho khÃ¡ch hÃ ng **Ä‘Ã¡nh giÃ¡ vÃ  pháº£n há»“i** sau khi:

* **ThuÃª sÃ¡ch** (Ä‘Ã¡nh giÃ¡ cháº¥t lÆ°á»£ng sÃ¡ch, tráº£i nghiá»‡m thuÃª).
* **Gá»i mÃ³n / thá»©c uá»‘ng** (Ä‘Ã¡nh giÃ¡ hÆ°Æ¡ng vá»‹, phá»¥c vá»¥).

Há»‡ thá»‘ng sáº½:

* LÆ°u Ä‘Ã¡nh giÃ¡ (ná»™i dung, hÃ¬nh áº£nh, má»©c Ä‘á»™ hÃ i lÃ²ng).
* Cho phÃ©p quáº£n trá»‹ viÃªn xem **bÃ¡o cÃ¡o tá»•ng há»£p Ä‘Ã¡nh giÃ¡**, phÃ¢n loáº¡i theo:

  * Loáº¡i Ä‘Æ¡n (SÃ¡ch / MÃ³n)
  * Má»©c sao trung bÃ¬nh
  * Sá»‘ lÆ°á»£ng Ä‘Ã¡nh giÃ¡ tÃ­ch cá»±c / tiÃªu cá»±c

---

## ğŸ”· 2. Actor liÃªn quan

| Actor                      | Vai trÃ²                                         |
| -------------------------- | ----------------------------------------------- |
| **KhÃ¡ch hÃ ng**             | Gá»­i Ä‘Ã¡nh giÃ¡, ná»™i dung, hÃ¬nh áº£nh, sao, nháº­n xÃ©t |
| **Quáº£n trá»‹ viÃªn**          | Duyá»‡t, pháº£n há»“i, áº©n / xÃ³a Ä‘Ã¡nh giÃ¡ sai quy Ä‘á»‹nh |
| **Chá»§ cá»­a hÃ ng / Quáº£n lÃ½** | Xem bÃ¡o cÃ¡o tá»•ng há»£p vÃ  thá»‘ng kÃª Ä‘Ã¡nh giÃ¡       |

---

## ğŸ”· 3. MÃ´ táº£ nghiá»‡p vá»¥ tá»•ng quan

### ğŸ§­ Luá»“ng tá»•ng quÃ¡t:

```
1ï¸âƒ£ KhÃ¡ch hÃ ng hoÃ n táº¥t Ä‘Æ¡n hÃ ng (thuÃª hoáº·c mÃ³n)
      â†“
2ï¸âƒ£ Há»‡ thá»‘ng hiá»ƒn thá»‹ gá»£i Ã½ â€œÄÃ¡nh giÃ¡ dá»‹ch vá»¥â€
      â†“
3ï¸âƒ£ KhÃ¡ch chá»n 1-5 sao, nháº­p ná»™i dung, táº£i áº£nh (náº¿u muá»‘n)
      â†“
4ï¸âƒ£ Gá»­i Ä‘Ã¡nh giÃ¡ lÃªn há»‡ thá»‘ng
      â†“
5ï¸âƒ£ Quáº£n lÃ½ cÃ³ thá»ƒ xem vÃ  tráº£ lá»i Ä‘Ã¡nh giÃ¡
      â†“
6ï¸âƒ£ BÃ¡o cÃ¡o tá»•ng há»£p thá»‘ng kÃª má»©c Ä‘á»™ hÃ i lÃ²ng
```

---

## ğŸ”· 4. Äáº·c táº£ chi tiáº¿t chá»©c nÄƒng

### **FS-05: Gá»¬I ÄÃNH GIÃ**

#### Má»¥c Ä‘Ã­ch

KhÃ¡ch hÃ ng gá»­i nháº­n xÃ©t, hÃ¬nh áº£nh vÃ  má»©c sao sau khi hoÃ n táº¥t Ä‘Æ¡n hÃ ng.

#### Tiá»n Ä‘iá»u kiá»‡n

* KhÃ¡ch hÃ ng Ä‘Ã£ Ä‘Äƒng nháº­p.
* ÄÆ¡n hÃ ng hoáº·c phiáº¿u thuÃª á»Ÿ tráº¡ng thÃ¡i `HoÃ n táº¥t`.

#### Háº­u Ä‘iá»u kiá»‡n

* Má»™t báº£n ghi Ä‘Ã¡nh giÃ¡ Ä‘Æ°á»£c lÆ°u vÃ o há»‡ thá»‘ng (`DanhGia`).
* LiÃªn káº¿t vá»›i `HoaDon` hoáº·c `PhieuThueSach` qua mÃ£ Ä‘Æ¡n (`IdDonHang`).

#### Luá»“ng chÃ­nh

| BÆ°á»›c | MÃ´ táº£ hÃ nh Ä‘á»™ng                                      | Há»‡ thá»‘ng xá»­ lÃ½                               |
| ---- | ---------------------------------------------------- | -------------------------------------------- |
| 1    | KhÃ¡ch má»Ÿ trang â€œÄÆ¡n mua cá»§a tÃ´iâ€                     | Hiá»ƒn thá»‹ danh sÃ¡ch Ä‘Æ¡n hÃ ng hoÃ n táº¥t         |
| 2    | Nháº¥n â€œÄÃ¡nh giÃ¡ Ä‘Æ¡n hÃ ngâ€                             | Má»Ÿ form nháº­p Ä‘Ã¡nh giÃ¡                        |
| 3    | Chá»n sá»‘ sao (1â€“5), nháº­p ná»™i dung, táº£i áº£nh (tÃ¹y chá»n) | XÃ¡c thá»±c ná»™i dung                            |
| 4    | Gá»­i Ä‘Ã¡nh giÃ¡                                         | LÆ°u vÃ o báº£ng `DanhGia`                       |
| 5    | Há»‡ thá»‘ng xÃ¡c nháº­n â€œÄÃ¡nh giÃ¡ thÃ nh cÃ´ngâ€              | Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng = â€œÄÃ£ Ä‘Ã¡nh giÃ¡â€ |

#### Dá»¯ liá»‡u lÆ°u

| Cá»™t            | Kiá»ƒu          | MÃ´ táº£                                      |
| -------------- | ------------- | ------------------------------------------ |
| `IdDanhGia`    | INT           | KhÃ³a chÃ­nh                                 |
| `IdKhachHang`  | INT           | NgÆ°á»i gá»­i                                  |
| `IdDonHang`    | INT           | LiÃªn káº¿t Ä‘áº¿n `HoaDon` hoáº·c `PhieuThueSach` |
| `LoaiDon`      | NVARCHAR(20)  | â€œSachâ€ hoáº·c â€œMonâ€                          |
| `SoSao`        | INT           | Sá»‘ sao (1â€“5)                               |
| `NoiDung`      | NVARCHAR(MAX) | Ná»™i dung nháº­n xÃ©t                          |
| `HinhAnh`      | NVARCHAR(500) | ÄÆ°á»ng dáº«n áº£nh (náº¿u cÃ³)                     |
| `NgayDanhGia`  | DATETIME      | Thá»i gian gá»­i                              |
| `PhanHoiAdmin` | NVARCHAR(MAX) | Pháº£n há»“i cá»§a quáº£n trá»‹ viÃªn                 |
| `TrangThai`    | NVARCHAR(20)  | Hiá»ƒn thá»‹ / áº¨n / ÄÃ£ pháº£n há»“i                |

---

### **FS-06: HIá»‚N THá»Š & QUáº¢N LÃ ÄÃNH GIÃ**

#### Má»¥c tiÃªu

GiÃºp nhÃ¢n viÃªn / quáº£n lÃ½ xem danh sÃ¡ch Ä‘Ã¡nh giÃ¡, pháº£n há»“i, vÃ  thá»‘ng kÃª.

#### Tiá»n Ä‘iá»u kiá»‡n

* NgÆ°á»i dÃ¹ng lÃ  **Admin / NhÃ¢n viÃªn quáº£n lÃ½**.

#### Háº­u Ä‘iá»u kiá»‡n

* Quáº£n trá»‹ viÃªn cÃ³ thá»ƒ pháº£n há»“i, áº©n, hoáº·c xÃ³a Ä‘Ã¡nh giÃ¡ vi pháº¡m.
* BÃ¡o cÃ¡o tá»•ng há»£p Ä‘Æ°á»£c cáº­p nháº­t theo thá»i gian.

#### Luá»“ng hoáº¡t Ä‘á»™ng

| BÆ°á»›c | HÃ nh Ä‘á»™ng                            | Há»‡ thá»‘ng xá»­ lÃ½                        |
| ---- | ------------------------------------ | ------------------------------------- |
| 1    | Quáº£n trá»‹ má»Ÿ trang â€œQuáº£n lÃ½ Ä‘Ã¡nh giÃ¡â€ | Hiá»ƒn thá»‹ danh sÃ¡ch Ä‘Ã¡nh giÃ¡ má»›i nháº¥t  |
| 2    | Lá»c theo loáº¡i: â€œSÃ¡ch / MÃ³n / Táº¥t cáº£â€ | Truy váº¥n theo `LoaiDon`               |
| 3    | Chá»n Ä‘Ã¡nh giÃ¡ Ä‘á»ƒ pháº£n há»“i            | Hiá»ƒn thá»‹ chi tiáº¿t ná»™i dung            |
| 4    | Gá»­i pháº£n há»“i hoáº·c áº©n Ä‘Ã¡nh giÃ¡        | Cáº­p nháº­t `PhanHoiAdmin` / `TrangThai` |
| 5    | Táº¡o bÃ¡o cÃ¡o thá»‘ng kÃª                 | Tá»•ng há»£p theo thÃ¡ng / quÃ½             |

---

### **FS-07: BÃO CÃO Tá»”NG Há»¢P ÄÃNH GIÃ**

#### Má»¥c tiÃªu

Thá»‘ng kÃª **má»©c Ä‘á»™ hÃ i lÃ²ng cá»§a khÃ¡ch hÃ ng** trÃªn toÃ n há»‡ thá»‘ng.

#### Nguá»“n dá»¯ liá»‡u

Tá»« báº£ng `DanhGia`, káº¿t há»£p vá»›i `HoaDon`, `PhieuThueSach`.

#### Dá»¯ liá»‡u tá»•ng há»£p vÃ­ dá»¥:

| Loáº¡i | Sá»‘ lÆ°á»£t Ä‘Ã¡nh giÃ¡ | Trung bÃ¬nh sao | % tÃ­ch cá»±c (â‰¥4 sao) | % tiÃªu cá»±c (â‰¤2 sao) |
| ---- | ---------------- | -------------- | ------------------- | ------------------- |
| SÃ¡ch | 52               | 4.4            | 87%                 | 4%                  |
| MÃ³n  | 68               | 4.6            | 91%                 | 3%                  |

#### Biá»ƒu Ä‘á»“ gá»£i Ã½

* Cá»™t: So sÃ¡nh trung bÃ¬nh sao SÃ¡ch / MÃ³n.
* ÄÆ°á»ng: Xu hÆ°á»›ng Ä‘Ã¡nh giÃ¡ theo thÃ¡ng.
* Báº£ng: Danh sÃ¡ch pháº£n há»“i má»›i nháº¥t.

---

## ğŸ’¡ 5. TÃ­ch há»£p giao diá»‡n (UI logic)

### **1ï¸âƒ£ Trong trang _Layout_Account.cshtml**

ThÃªm má»¥c:

```html
<li class="nav-item">
    <a class="nav-link" asp-page="/Account/DanhGiaView">
        <i class="fa fa-star"></i> ÄÃ¡nh giÃ¡ cá»§a tÃ´i
    </a>
</li>
```

### **2ï¸âƒ£ Trong DonMuaView.cshtml**

Hiá»ƒn thá»‹ nÃºt â€œÄÃ¡nh giÃ¡â€ vá»›i Ä‘Æ¡n Ä‘Ã£ hoÃ n táº¥t:

```html
@if (item.TrangThai == "HoÃ n táº¥t" && !item.DaDanhGia)
{
    <a asp-action="DanhGia" asp-route-id="@item.IdDonHang" class="btn btn-outline-primary btn-sm">
        ÄÃ¡nh giÃ¡ Ä‘Æ¡n hÃ ng
    </a>
}
```

### **3ï¸âƒ£ Trong DanhGiaView.cshtml**

Form gá»­i Ä‘Ã¡nh giÃ¡:

```html
<form method="post" enctype="multipart/form-data">
    <label>Chá»n sá»‘ sao:</label>
    <select name="SoSao" class="form-select">
        <option>5</option>
        <option>4</option>
        <option>3</option>
        <option>2</option>
        <option>1</option>
    </select>

    <textarea name="NoiDung" class="form-control mt-2" placeholder="Cáº£m nháº­n cá»§a báº¡n..."></textarea>

    <input type="file" name="HinhAnh" class="form-control mt-2" />
    <button type="submit" class="btn btn-success mt-3">Gá»­i Ä‘Ã¡nh giÃ¡</button>
</form>
```

---

## ğŸ§± 6. MÃ´ hÃ¬nh dá»¯ liá»‡u liÃªn káº¿t (ERD)

```
KhachHang â”€â”€â”€< DanhGia >â”€â”€â”€ HoaDon
                     â”‚
                     â””â”€â”€â”€â”€â”€â”€ PhieuThueSach
```

* Má»™t khÃ¡ch cÃ³ thá»ƒ cÃ³ nhiá»u Ä‘Ã¡nh giÃ¡.
* Má»—i Ä‘Ã¡nh giÃ¡ chá»‰ thuá»™c **má»™t Ä‘Æ¡n hÃ ng (sÃ¡ch hoáº·c mÃ³n)**.
* CÃ³ thá»ƒ lá»c, bÃ¡o cÃ¡o, thá»‘ng kÃª theo loáº¡i Ä‘Æ¡n (`LoaiDon`).

---

## âœ… 7. Æ¯u Ä‘iá»ƒm cá»§a há»‡ thá»‘ng Ä‘Ã¡nh giÃ¡ nÃ y

| Lá»£i Ã­ch             | MÃ´ táº£                                              |
| ------------------- | -------------------------------------------------- |
| ğŸ¯ Pháº£n há»“i thá»±c táº¿ | KhÃ¡ch gá»­i cáº£m nháº­n tháº­t sau má»—i Ä‘Æ¡n                |
| ğŸ“¸ Trá»±c quan        | Cho phÃ©p gá»­i kÃ¨m hÃ¬nh áº£nh                          |
| ğŸ“Š Dá»… thá»‘ng kÃª      | TÃ¡ch biá»‡t Ä‘Ã¡nh giÃ¡ sÃ¡ch / mÃ³n nhÆ°ng tá»•ng há»£p chung |
| ğŸ’¬ TÄƒng tÆ°Æ¡ng tÃ¡c   | Quáº£n lÃ½ cÃ³ thá»ƒ pháº£n há»“i trá»±c tiáº¿p                  |
| â­ XÃ¢y dá»±ng uy tÃ­n   | Hiá»ƒn thá»‹ Ä‘Ã¡nh giÃ¡ tá»‘t Ä‘á»ƒ thu hÃºt khÃ¡ch má»›i         |

---

## ğŸ”® 8. Gá»£i Ã½ má»Ÿ rá»™ng trong tÆ°Æ¡ng lai

* Cho phÃ©p khÃ¡ch **chá»‰nh sá»­a hoáº·c xÃ³a Ä‘Ã¡nh giÃ¡** trong 24h.
* Hiá»ƒn thá»‹ **Ä‘Ã¡nh giÃ¡ ná»•i báº­t** trÃªn trang chá»§ (Top 5 Ä‘Ã¡nh giÃ¡ gáº§n nháº¥t).
* Cho phÃ©p **lá»c sÃ¡ch / mÃ³n theo Ä‘Ã¡nh giÃ¡ cao nháº¥t**.
* ThÃªm **tÃ­nh nÄƒng AI phÃ¢n tÃ­ch cáº£m xÃºc** trong ná»™i dung Ä‘Ã¡nh giÃ¡ (phÃ¢n loáº¡i tÃ­ch cá»±c / tiÃªu cá»±c tá»± Ä‘á»™ng).

---

## âœ… Káº¿t luáº­n

| ThÃ nh pháº§n             | Tráº¡ng thÃ¡i                        | Ghi chÃº                       |
| ---------------------- | --------------------------------- | ----------------------------- |
| Chá»©c nÄƒng gá»­i Ä‘Ã¡nh giÃ¡ | âœ… HoÃ n chá»‰nh                      | Há»— trá»£ ná»™i dung, áº£nh, sao     |
| Quáº£n lÃ½ pháº£n há»“i       | âœ… CÃ³ duyá»‡t / áº©n / xÃ³a             | Dá»… triá»ƒn khai báº±ng Razor Page |
| BÃ¡o cÃ¡o tá»•ng há»£p       | âœ… CÃ³ thá»ƒ dÃ¹ng SQL View hoáº·c chart | Gá»™p cáº£ sÃ¡ch vÃ  mÃ³n            |
| Cáº¥u trÃºc CSDL          | âœ… Äá»™c láº­p, chá»‰ cáº§n báº£ng `DanhGia` | KhÃ´ng cáº§n chá»‰nh báº£ng cÅ©       |

---

ğŸ‘‰ Náº¿u báº¡n muá»‘n, tÃ´i cÃ³ thá»ƒ **viáº¿t luÃ´n Ä‘oáº¡n SQL táº¡o báº£ng `DanhGia` + truy váº¥n bÃ¡o cÃ¡o tá»•ng há»£p (gá»™p SÃ¡ch vÃ  MÃ³n)** Ä‘á»ƒ báº¡n copy cháº¡y trá»±c tiáº¿p vÃ o SQL Server â€” báº¡n cÃ³ muá»‘n tÃ´i táº¡o pháº§n Ä‘Ã³ luÃ´n khÃ´ng?
e:\Tai Lieu Hoc Tap\CS 445 AM\Project\CafebookApi\wwwroot\images\anhdanhgia\sach\
e:\Tai Lieu Hoc Tap\CS 445 AM\Project\CafebookApi\wwwroot\images\anhdanhgia\monan\
e:\Tai Lieu Hoc Tap\CS 445 AM\Project\CafebookModel\Model\ModelWeb\
e:\Tai Lieu Hoc Tap\CS 445 AM\Project\CafebookModel\Model\ModelApp\
e:\Tai Lieu Hoc Tap\CS 445 AM\Project\CafebookApi\Controllers\App\
e:\Tai Lieu Hoc Tap\CS 445 AM\Project\CafebookApi\Controllers\Web\